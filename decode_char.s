.globl print_char
.data
    
    characters: .byte 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18, 0x00  , 0x36, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00  , 0x36, 0x36, 0x7F, 0x36, 0x7F, 0x36, 0x36, 0x00  , 0x0C, 0x3E, 0x03, 0x1E, 0x30, 0x1F, 0x0C, 0x00  , 0x00, 0x63, 0x33, 0x18, 0x0C, 0x66, 0x63, 0x00  , 0x1C, 0x36, 0x1C, 0x6E, 0x3B, 0x33, 0x6E, 0x00  , 0x06, 0x06, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00  , 0x18, 0x0C, 0x06, 0x06, 0x06, 0x0C, 0x18, 0x00  , 0x06, 0x0C, 0x18, 0x18, 0x18, 0x0C, 0x06, 0x00  , 0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00  , 0x00, 0x0C, 0x0C, 0x3F, 0x0C, 0x0C, 0x00, 0x00  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x06  , 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00  , 0x60, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x01, 0x00  , 0x3E, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x3E, 0x00  , 0x0C, 0x0E, 0x0C, 0x0C, 0x0C, 0x0C, 0x3F, 0x00  , 0x1E, 0x33, 0x30, 0x1C, 0x06, 0x33, 0x3F, 0x00  , 0x1E, 0x33, 0x30, 0x1C, 0x30, 0x33, 0x1E, 0x00  , 0x38, 0x3C, 0x36, 0x33, 0x7F, 0x30, 0x78, 0x00  , 0x3F, 0x03, 0x1F, 0x30, 0x30, 0x33, 0x1E, 0x00  , 0x1C, 0x06, 0x03, 0x1F, 0x33, 0x33, 0x1E, 0x00  , 0x3F, 0x33, 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x00  , 0x1E, 0x33, 0x33, 0x1E, 0x33, 0x33, 0x1E, 0x00  , 0x1E, 0x33, 0x33, 0x3E, 0x30, 0x18, 0x0E, 0x00  , 0x00, 0x0C, 0x0C, 0x00, 0x00, 0x0C, 0x0C, 0x00  , 0x00, 0x0C, 0x0C, 0x00, 0x00, 0x0C, 0x0C, 0x06  , 0x18, 0x0C, 0x06, 0x03, 0x06, 0x0C, 0x18, 0x00  , 0x00, 0x00, 0x3F, 0x00, 0x00, 0x3F, 0x00, 0x00  , 0x06, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x06, 0x00  , 0x1E, 0x33, 0x30, 0x18, 0x0C, 0x00, 0x0C, 0x00  , 0x3E, 0x63, 0x7B, 0x7B, 0x7B, 0x03, 0x1E, 0x00  , 0x0C, 0x1E, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x00  , 0x3F, 0x66, 0x66, 0x3E, 0x66, 0x66, 0x3F, 0x00  , 0x3C, 0x66, 0x03, 0x03, 0x03, 0x66, 0x3C, 0x00  , 0x1F, 0x36, 0x66, 0x66, 0x66, 0x36, 0x1F, 0x00  , 0x7F, 0x46, 0x16, 0x1E, 0x16, 0x46, 0x7F, 0x00  , 0x7F, 0x46, 0x16, 0x1E, 0x16, 0x06, 0x0F, 0x00  , 0x3C, 0x66, 0x03, 0x03, 0x73, 0x66, 0x7C, 0x00  , 0x33, 0x33, 0x33, 0x3F, 0x33, 0x33, 0x33, 0x00  , 0x1E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00  , 0x78, 0x30, 0x30, 0x30, 0x33, 0x33, 0x1E, 0x00  , 0x67, 0x66, 0x36, 0x1E, 0x36, 0x66, 0x67, 0x00  , 0x0F, 0x06, 0x06, 0x06, 0x46, 0x66, 0x7F, 0x00  , 0x63, 0x77, 0x7F, 0x7F, 0x6B, 0x63, 0x63, 0x00  , 0x63, 0x67, 0x6F, 0x7B, 0x73, 0x63, 0x63, 0x00  , 0x1C, 0x36, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x00  , 0x3F, 0x66, 0x66, 0x3E, 0x06, 0x06, 0x0F, 0x00  , 0x1E, 0x33, 0x33, 0x33, 0x3B, 0x1E, 0x38, 0x00  , 0x3F, 0x66, 0x66, 0x3E, 0x36, 0x66, 0x67, 0x00  , 0x1E, 0x33, 0x07, 0x0E, 0x38, 0x33, 0x1E, 0x00  , 0x3F, 0x2D, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00  , 0x33, 0x33, 0x33, 0x33, 0x33, 0x33, 0x3F, 0x00  , 0x33, 0x33, 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x00  , 0x63, 0x63, 0x63, 0x6B, 0x7F, 0x77, 0x63, 0x00  , 0x63, 0x63, 0x36, 0x1C, 0x1C, 0x36, 0x63, 0x00  , 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x0C, 0x1E, 0x00  , 0x7F, 0x63, 0x31, 0x18, 0x4C, 0x66, 0x7F, 0x00  , 0x1E, 0x06, 0x06, 0x06, 0x06, 0x06, 0x1E, 0x00  , 0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x40, 0x00  , 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1E, 0x00  , 0x08, 0x1C, 0x36, 0x63, 0x00, 0x00, 0x00, 0x00  , 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF  , 0x0C, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00  , 0x00, 0x00, 0x1E, 0x30, 0x3E, 0x33, 0x6E, 0x00  , 0x07, 0x06, 0x06, 0x3E, 0x66, 0x66, 0x3B, 0x00  , 0x00, 0x00, 0x1E, 0x33, 0x03, 0x33, 0x1E, 0x00  , 0x38, 0x30, 0x30, 0x3e, 0x33, 0x33, 0x6E, 0x00  , 0x00, 0x00, 0x1E, 0x33, 0x3f, 0x03, 0x1E, 0x00  , 0x1C, 0x36, 0x06, 0x0f, 0x06, 0x06, 0x0F, 0x00  , 0x00, 0x00, 0x6E, 0x33, 0x33, 0x3E, 0x30, 0x1F  , 0x07, 0x06, 0x36, 0x6E, 0x66, 0x66, 0x67, 0x00  , 0x0C, 0x00, 0x0E, 0x0C, 0x0C, 0x0C, 0x1E, 0x00  , 0x30, 0x00, 0x30, 0x30, 0x30, 0x33, 0x33, 0x1E  , 0x07, 0x06, 0x66, 0x36, 0x1E, 0x36, 0x67, 0x00  , 0x0E, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x1E, 0x00  , 0x00, 0x00, 0x33, 0x7F, 0x7F, 0x6B, 0x63, 0x00  , 0x00, 0x00, 0x1F, 0x33, 0x33, 0x33, 0x33, 0x00  , 0x00, 0x00, 0x1E, 0x33, 0x33, 0x33, 0x1E, 0x00  , 0x00, 0x00, 0x3B, 0x66, 0x66, 0x3E, 0x06, 0x0F  , 0x00, 0x00, 0x6E, 0x33, 0x33, 0x3E, 0x30, 0x78  , 0x00, 0x00, 0x3B, 0x6E, 0x66, 0x06, 0x0F, 0x00  , 0x00, 0x00, 0x3E, 0x03, 0x1E, 0x30, 0x1F, 0x00  , 0x08, 0x0C, 0x3E, 0x0C, 0x0C, 0x2C, 0x18, 0x00  , 0x00, 0x00, 0x33, 0x33, 0x33, 0x33, 0x6E, 0x00  , 0x00, 0x00, 0x33, 0x33, 0x33, 0x1E, 0x0C, 0x00  , 0x00, 0x00, 0x63, 0x6B, 0x7F, 0x7F, 0x36, 0x00  , 0x00, 0x00, 0x63, 0x36, 0x1C, 0x36, 0x63, 0x00  , 0x00, 0x00, 0x33, 0x33, 0x33, 0x3E, 0x30, 0x1F  , 0x00, 0x00, 0x3F, 0x19, 0x0C, 0x26, 0x3F, 0x00  , 0x38, 0x0C, 0x0C, 0x07, 0x0C, 0x0C, 0x38, 0x00  , 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00  , 0x07, 0x0C, 0x0C, 0x38, 0x0C, 0x0C, 0x07, 0x00  , 0x6E, 0x3B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 , 
    position: .word 0x1400
    
.text
    
    # FUnction xddd
    # $a0 -> character in ascii
    print_char:
	addi	    $sp, $sp, -20
	sw	    $ra, ($sp)
	sw	    $s0, 4($sp)
	sw	    $s1, 8($sp)
	sw	    $s2, 12($sp)
	sw	    $s3, 16($sp)
	
	
	beq	    $a0, $zero, endLine
	
	# cargar bitmap
	la $t0, characters
	addi $t1, $a0, -32
	mul $t1, $t1, 8
	add $a0, $t1, $t0

	# handle $a0, transpose!
	
	# cargar inicial
	lw $a1, position
	# cargar final
	
	# position xd
	# to fix
	lw	$t0, position
	andi	$t1, $t0, 0xFF00
	srl	$t1, $t1, 8
	addi	$t1, $t1, 16
	beq	$t1, 0x64, jump_line
	sll	$t1, $t1, 8
	# change page when hits 100 in dec, or 0x64
	andi	$t0, $t0, 0xFF
	or	$s0, $t1, $t0
	add	$a2, $s0, $zero
	j	print_ready
	jump_line:
	    li $t1, 0x00
	    sll $t1, $t1, 8
	    andi $t0, $t0, 0xFF
	    addi $t0, $t0, 1
	    beq $t0, 7, start_over
	    or $s0, $t1, $t0
	    add $a2, $s0, $zero
	    j print_ready
	    start_over:
		li $s0, 0x1400

	print_ready:
	# exception at 305 driver_oled
	jal print_bitmap

	endLine:
	sw	    $s0, position
	lw	    $s3, 16($sp)
	lw	    $s2, 12($sp)
	lw	    $s1, 8($sp)
	lw	    $s0, 4($sp)
	lw	    $ra, ($sp)
	addi    $sp, $sp, 20
	jr	    $ra

